# 网络层
- 网络层与网络互联的基本概念
- IPv4协议的基本内容
- IP地址、路由算法与路由协议的基本概念
- 地址解析协议ARP的基本概念与方法
- 路由器与第三层交换的基本概念
- IPv6协议的基本内容
- 移动IP协议的基本概念
- ICMP协议与IGMP协议的基本概念
- MPLS协议与虚拟专网VPN的基本概念
### 1.1 网络层与网络互联
> 网络层通过路有选择算法，为IP分组从源主机到目的主机选择一条合适的传输路径，为传输层提供端-端数据传输服务。
#### 网络互联的设备
> 中间设备又称为中间系统或中继系统
- 物理层中继系统：转发器
- 数据链路层中继系统：网桥或桥接器
- 网络层中继系统：路由器
- 网络层以上的中继系统：网关
#### 网络互联的问题
- 不同的寻址方案
- 不同的最大分组长度
- 不同的网络接入机制
- 不同的超时空之
- 不同的差错恢复方法
- 不同的状态报告方法
- 不同的路有选择技术
- 不同的用户接入控制
- 不同的服务（面向连接和无连接）
- 不同的管理控制方式
#### 虚拟互联网络
> 所谓虚拟互联网络也就是逻辑互联网络，他的意思就是互联起来的各种物理网络的异构性本来是客观存在的但是我们利用IP协议就可以使这些性能各异的网络从用户看起来好像是一个统一的网络。使用IP协议的虚拟互联网络可简称为IP网

### 1.2 IP协议
#### 1.2.1 IP协议简介
> 网际协议IP是TCP/IP体系中两个最主要的协议之一，与IP协议配套使用的还有四个协议
- 地址解析协议 ARP（Address Resolution Protocol)
- 逆地址解析协议 RARP (Reverse Address Resolution Protocol)
- 网际控制报文协议 ICMP (Internet Control Message Protocol)
- 网际组管理协议 IGMP (Internet Group Management Protocol)
#### 1.2.2 IPv4协议基本内容
##### IP协议的主要特点
- 无连接、不可靠的分组传送服务的协议，提供的是一种尽力而为的服务
- 是点-点的网络层通信协议
- 屏蔽了互联的网络在数据链路层、物理层协议与实现技术上的差异

##### IPv4分组结构
IPv4分组结构.jpg
##### IPv4分组头格式
- 版本：4-->IPv4,6-->IPv6
- 分组头长度：定义了以4字节为一个单位的分组头长度，爆头的固定长度部分为20字节，IP分组的分组头长度必须是4字节的整数倍，如果不是，则由填充字段“添0”补齐
- 区分服务：长度为8位，前六位为区分服务（DS）字段，后两位为拥塞通知（ECN）字段，DS字段只有在IPv4中提供区分服务时才起作用。
- 总长度：一字节为单位的分组头字段与数据字段长度之和，长度为16位，所以IP分组的最大长度为65535字节
- 生存时间：TTL（time-to-live），每经过一个路由转发，TTL减一，当TTL为0时则路由器丢弃该分组并向源主机发送ICMP报文。
- IP协议高层协议类型

协议字段值 | 高层协议类型 | 协议字段值 | 高层协议类型
---|---|---|---
1 | ICMP|17|UDP
2 | IGMP|41|IPv6
6 | TCP|89|OSPF
8 | EGP

- 头检验和：保证分组头部数据完整性，只对分组头进行校验
- 地址：包括源地址和目的地址
- 